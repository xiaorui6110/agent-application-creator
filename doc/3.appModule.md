# 应用模块的设计文档

将简单的代码生成工具升级为完整的平台

## 功能
基本的增删改查

## Prompt 优化
### 优化后的流程
- 用户输入需求信息，如"请帮我做一个番茄计时专注小工具"
- AI 先进行分析规划，询问用户使用何种方式生成应用（html、前端三件套、Vue框架等等）
- 用户确认并给出要求和补充信息
- AI 开始生成应用代码

## 流程
>  将 agent 与应用平台集成

用户在主页输入提示词后，系统会创建一个应用记录؜，
然后跳转到对话页面与 AI 交互生成网站。生成完成后，用户可以预览效果，
满意后进行部署，‍让网站真正对外提供服务。

1. 用户在主页输入提示词创建应用（入库）
2. 获得应用 ID 后跳转到对话页面
3. 系统自动使用初始提示词与 AI 对话生成网站代码

- **在 AgentController 的 chat 接口上新增关联 app 的方法服务** ❎
- **原本的 AppController 接口只存放 CURD 等基础业务相关内容** ❎

**这样做会有逻辑问题，在多轮对话时会出现反复生成 appId 的问题，
因为 appId 只与 userId 关联，agent 无法判断是否是同一个会话**

### 流程理解
1. 用户在主页输入提示词，然后创建应用
2. 获取到 appId 后，前端跳转至 Agent 对话页面
3. 在对话界面在传输用户之前的 message、appId等信息
4. 与 Agent 对话完成应用生成

**这样做就是将后端需要耦合的判断 appId 的流程交给前端页面跳转来优化处理**

## 应用部署方案
> 部署的整体思路是：把本地生成的文件同步到一个 Web 服务器上。

**使用 SpringBoot 接口实现 AI 生成的网页预览，使用 Nginx 提供网站部署服务**


