# 在项目上的一些思考

## RAG 的使用与否问题
### 项目的流程

1. 用户给出需求 
2. Agent 规划 
3. 工具调用（代码生成 / 搜索 / 构建） 
4. 产出完整可运行项目 
5. 返回

### 暂时不做 RAG
**现在不做 RAG，但：**
- 设计接口时，给 Retrieval 留一个 Hook
- Tool 体系里，留一个 KnowledgeTool 空位
- Prompt 结构别写死

---

## 多模型调用是否采用的问题
### 一开始的流程是
1. 用户给出需求
2. agent先进行规划和确认
3. 完成代码的生成并上传文件
4. 最终将项目运行并展示给用户
> 全流程都是一个agent智能体的工作
### 根据自己的想法和实际参考
。。。（暂时空着）

---
## MCP 服务的取舍问题
确实可做可不做，后面看情况吧

---
## 应用生成项目结构选择问题
1. 对于简单的应用，单文件 html 可完成 
2. 稍微复杂一点的，前端三件套也可完成 
3. 最后才是工程级别的项目需要使用到框架等等
> 如何通过用户一个请求信息，去选择

市面上的 AI 基本上是如果需求可以简易实现的，就简易实现，后面才给出工程级别的建议
> 自己的想法是写好系统的 prompt，包含不同种代码实现的需求，用户只需要给出一句话，
> 比如"请帮我做一个番茄计时专注小工具"，然后 AI 根据用户描述自己去选择如何生成代码，
> 需要询问用户的意见，是否需要强制使用何种方法等等，最后再进行代码生成实现。
> 当然，肯定是能简就简。 所以项目中就不需要多种代码生成规范的服务实现，保留一个总的接口即可。
---

## 目前阶段的设计想法（有点小瓶颈）

**目前已经完成的功能或者需求（需优化的地方先不考虑）：**

- 用户模块，基本完成
- agent模块，对话生成项目等功能也完成差不多
- 应用模块，基本完成
- 对话历史保存模块，基本完成

**OK，与 gpt 讨论过后，以下是一些思考：**

- agent 方面：自我反思优化代码、给出示例项目代码、多 agent 协作
- 应用管理方面：版本管理、应用模板化、应用快照、可视化编辑、部署下线等等
- 观测和质量体系：生成成功率、用户满意度、agent 执行耗时、token 消耗、部署成功率等等
- 用户生态：团队项目空间、应用分享、模板市场（但是这部分自己感觉不好实现）

### 考虑下一步
> 所以，现在自己想的是再进一步丰富或者说优化 agent 方面的东西， 
> 其他都是在 agent 基础上进行封装等操作的模块。

> 前提：
> agent 与其他模块集成已经实现了，项目代码生成、下载、部署等功能；
> agent 的工作流程也基本上比较完善，但是还需优化。

_**时刻提醒自己，是在做应用生成平台，不是 IDE 等工具。虽然边界很模糊。**_

**然后对于 agent 模块的进一步思考设计：**

1. 创建 tools 工具，让 agent 可以实现在原有代码基础上修改的功能
2. 创建 hooks 等，实现 agent 调用信息的统计、记录生成快照等功能
3. 以及拦截器等功能

---
## 多 agent 协作
一些必要功能的实现大都需要多 agent 才能较好的实现

列出自己的设想流程吧：

1. 主 agent：应用代码的生成（主要是平台级别的，暴露出来的 agent）
2. 子 agent：应用代码的保存（用于协助主 agent 对代码文件进行保存部署等对于文件系统操作）
3. 子 agent：应用代码的优化（用于对主 agent 生成的代码进行优化反思）
4. 或者还有其他的待定。。。

_**还有就是提示词的反复优化，prompt 很重要**_

### 多智能体交接（Multi-agent）

自己的初步多智能体交接的设计（工具调用 Agent Tool 模式）：
> 多智能体协作，自己的想法是使用不超过 3 个 agent 来实现，有维护成本、上下文工程、响应时长等等原因
- 主: 平台应用生成 agent（appCreatorAgent）：可能负责的功能比较多，但是全程只有一个 agent 完成，保证上下文的完整性和语义的连贯性
    - 负责与用户直接交互，分析用户需求、询问技术方案
    - 进行应用的方案设计，生成项目代码
    - 持续与用户交互，根据用户的最新需求，不断修改代码（生成修改代码的 plan，之后由系统完成文件修改，安全）
- 副: 应用代码优化 agent（codeOptimizationAgent）：应该是异步执行的，然后向主 agent 返回结果
    - 负责对 appCreatorAgent 生成的应用代码进行优化，反思代码，并给出修改建议反馈给主 agent
    - 根据平台生成的应用代码，不断总结出更优更符合平台的代码结构或模板，并反馈给主 agent

OK，先实现这两个 agent 的协作，后面如果需要再添加。

---

### 检索增强生成（RAG）

三种应用生成方式对应的详细 prompt，可以参考





